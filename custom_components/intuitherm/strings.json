{
  "config": {
    "step": {
      "user": {
        "title": "intuiHEMS Energy Optimization v{version}",
        "description": "This setup wizard will:\n\nüîç Auto-detect your energy devices\n   ‚Ä¢ Battery systems\n   ‚Ä¢ Solar inverters\n   ‚Ä¢ Grid meters\n\nüìä Find the best sensors to monitor\n   ‚Ä¢ Cumulative energy meters (kWh) - most reliable\n   ‚Ä¢ Battery state of charge (%)\n   ‚Ä¢ Power sensors (kW) - fallback\n\n‚ö° Enable battery optimization\n   ‚Ä¢ Smart charging during cheap hours\n   ‚Ä¢ Maximize solar self-consumption\n   ‚Ä¢ Minimize grid costs\n\nPrerequisites:\n‚Ä¢ Home Assistant Energy Dashboard configured\n‚Ä¢ Battery/Solar/Grid devices integrated\n\nSetup takes ~2 minutes."
      },
      "register": {
        "title": "Connecting to intuiHEMS",
        "description": "Registering your Home Assistant installation with the cloud service...\n\n‚ú® Creating your account automatically\nüîê Generating secure API key\nüìç Using your location for weather data\n\nThis takes just a few seconds."
      },
      "auto_detect": {
        "title": "Auto-Detecting Energy Sensors",
        "description": "Scanning your Home Assistant Energy Dashboard and devices...\n\nWe prefer cumulative energy sensors (kWh) because they provide the most reliable data for optimization. The backend will automatically compute power values from these.\n\nThis may take 10-15 seconds."
      },
      "device_discovery": {
        "title": "Discovered Energy Devices",
        "description": "{device_details}\n\nClick Next to proceed to sensor review."
      },
      "review": {
        "title": "Review & Select Sensors",
        "description": "We recommend using the following cumulative energy sensors (kWh). Select from the dropdown or enter a custom entity ID below each sensor.\n\n‚úÖ Cumulative sensors provide the most reliable data\nüìù Custom fields override dropdown selections",
        "data": {
          "solar_production": "Solar Production Sensor",
          "battery_soc": "Battery State of Charge",
          "battery_charge": "Battery Charge Sensor (Optional)",
          "battery_discharge": "Battery Discharge Sensor (Optional)",
          "grid_import": "Grid Import Sensor (Optional)",
          "grid_export": "Grid Export Sensor (Optional)",
          "house_load": "House Load Sensor (Optional)"
        },
        "data_description": {
          "solar_production": "Select cumulative solar energy production sensor (kWh preferred)",
          "battery_soc": "Select battery charge percentage sensor (0-100%)",
          "battery_charge": "Select cumulative battery charge energy sensor (kWh preferred)",
          "battery_discharge": "Select cumulative battery discharge energy sensor (kWh preferred)",
          "grid_import": "Select cumulative energy imported from grid (kWh preferred)",
          "grid_export": "Select cumulative energy exported to grid (kWh preferred)",
          "house_load": "Select house load sensor (optional, auto-calculated if omitted)"
        }
      },
      "pricing": {
        \"title\": \"Configure Dynamic Pricing & Battery Specs\",
        \"description\": \"intuiHEMS uses EPEX Day-Ahead spot prices for optimization.\\n\\nüí∂ Enter your additional costs on top of the spot price\\nüìä These values help calculate the most cost-effective battery strategy\\nüîã Configure your battery specifications\\n\\n‚ú® Historic data will be collected automatically on first run\",
        \"data\": {
          \"battery_capacity\": \"Battery Capacity (kWh)\",
          \"battery_max_power\": \"Battery Max Power (kW)\",
          \"epex_markup\": \"Grid Import Markup (‚Ç¨/kWh)\",
          \"dry_run_mode\": \"Dry Run Mode (No Battery Control)\"
        },
        \"data_description\": {
          \"battery_capacity\": \"Usable capacity of your battery in kWh. For example, if your battery is 13.5 kWh with 90% usable capacity, enter 12.15 kWh. This is used to calculate optimal charge/discharge strategies.\",
          \"battery_max_power\": \"Maximum charging and discharging power in kW. For example, if your battery can charge at 5 kW and discharge at 5 kW, enter 5.0. This limits optimization to realistic power levels.\",
          \"epex_markup\": \"Additional cost you pay on top of EPEX spot price (taxes, distribution fees, supplier margin). For example, if spot price is 0.10 ‚Ç¨/kWh and you pay 0.25 ‚Ç¨/kWh total, enter 0.15 ‚Ç¨/kWh.\",
          \"dry_run_mode\": \"Enable to see optimization recommendations without controlling your battery. Perfect for testing! When enabled, you'll see what the system would do, but it won't actually change battery modes.\"
        }
      },
      \"battery_control\": {
        \"title\": \"Battery Control Entities (Optional)\",
        \"description\": \"Configure entities to enable automatic battery control based on MPC optimization.\\n\\n‚ö° Leave empty to run in monitoring-only mode\\nüéØ These entities will be controlled automatically every 15 minutes\\n\\n{info}\",
        \"data\": {
          \"battery_mode_select\": \"Battery Mode Select\",
          \"battery_charge_power\": \"Battery Charge Power Control\",
          \"battery_discharge_power\": \"Battery Discharge Power Control\"
        },
        \"data_description\": {
          \"battery_mode_select\": \"Select entity that controls battery operating mode (e.g., select.work_mode, select.battery_mode). The integration will switch between modes like Self Use, Backup, and Force Charge based on optimization. Required for automatic battery control.\",
          \"battery_charge_power\": \"Number entity to set maximum charging power (e.g., number.max_charge_current, number.charge_power_limit). Used to control how fast the battery charges. For FoxESS inverters, this is typically in Amperes and will be converted automatically.\",
          \"battery_discharge_power\": \"Number entity to set maximum discharge power (e.g., number.max_discharge_current, number.discharge_power_limit). Used to control how fast the battery discharges. Optional - leave empty if your inverter doesn't support this.\"
        }
      },
      \"mode_mapping\": {
        \"title\": \"Battery Mode Mapping\",
        \"description\": \"Map MPC control actions to your inverter's specific mode names.\\n\\nüîÑ Different inverter brands use different mode names\\nüìù Select the exact option that matches each control action\\n\\nFor example:\\n‚Ä¢ Self Use = Battery charges from solar, powers house\\n‚Ä¢ Backup = Battery reserved for emergencies\\n‚Ä¢ Force Charge = Battery charges from grid\",
        \"data\": {
          \"mode_self_use\": \"Self Use Mode Name\",
          \"mode_backup\": \"Backup Mode Name\",
          \"mode_force_charge\": \"Force Charge Mode Name\"
        },
        \"data_description\": {
          \"mode_self_use\": \"Select the mode option that represents 'Self Use' on your inverter. This mode allows battery to charge from solar and discharge to house loads, but prevents grid charging. Common names: Self Use, Self Consumption, PV Mode.\",
          \"mode_backup\": \"Select the mode option that represents 'Backup' on your inverter. This mode reserves battery for backup power and prevents charging from grid. Common names: Backup, UPS Mode, Reserve Mode.\",
          \"mode_force_charge\": \"Select the mode option that represents 'Force Charge' on your inverter. This mode enables active charging from grid at specified power level. Common names: Force Charge, Grid Charge, Charging Mode.\"
        }
      }
    },
    "error": {
      "cannot_connect": "Failed to connect to IntuiTherm service. Please check the service URL and ensure the service is running.",
      "invalid_api_key": "Invalid API key. Please check your API key and try again.",
      "timeout_connect": "Connection timeout. The service took too long to respond. Please check if the service is reachable.",
      "registration_failed": "Failed to register with intuiHEMS service. Please try again or contact support if the problem persists.",
      "already_registered": "This Home Assistant installation is already registered. If you need to recover your API key, please contact support at support@intuihems.io.",
      "alpha_limit_reached": "The service has reached its alpha testing capacity. Please join the waitlist at {waitlist_url}",
      "unknown": "Unexpected error occurred. Please check the logs for more details."
    },
    "abort": {
      "already_configured": "This IntuiTherm service is already configured."
    }
  },
  \"options\": {
    \"step\": {
      \"init\": {
        \"title\": \"Configure intuiHEMS Settings\",
        \"description\": \"Reconfigure your intuiHEMS integration settings.\\n\\nüìä Update sensors and battery configuration\\n‚ö° Modify battery control entities\\nüîã Adjust battery specifications\\n\\n**Your User ID:** {user_id}\\n(This ID is used for backend communication and cannot be changed)\",
        \"data\": {
          \"battery_capacity\": \"Battery Capacity (kWh)\",
          \"battery_max_power\": \"Battery Max Power (kW)\",
          \"epex_markup\": \"Grid Import Markup (‚Ç¨/kWh)\",
          \"battery_soc_entity\": \"Battery State of Charge (%)\",
          \"solar_power_entity\": \"Solar Energy Total (kWh)\",
          \"house_load_entity\": \"House Energy Consumption (kWh)\",
          \"battery_mode_select\": \"Battery Mode Select\",
          \"battery_charge_power\": \"Battery Charge Power Control\",
          \"mode_self_use\": \"Self Use Mode Name\",
          \"mode_backup\": \"Backup Mode Name\",
          \"mode_force_charge\": \"Force Charge Mode Name\"
        },
        \"data_description\": {
          \"battery_capacity\": \"Usable capacity of your battery in kWh. For example, if your battery is 13.5 kWh with 90% usable capacity, enter 12.15 kWh. This is used to calculate optimal charge/discharge strategies.\",
          \"battery_max_power\": \"Maximum charging and discharging power in kW. For example, if your battery can charge at 5 kW and discharge at 5 kW, enter 5.0. This limits optimization to realistic power levels.\",
          \"epex_markup\": \"Additional cost you pay on top of EPEX spot price (taxes, distribution fees, supplier margin). For example, if spot price is 0.10 ‚Ç¨/kWh and you pay 0.25 ‚Ç¨/kWh total, enter 0.15 ‚Ç¨/kWh.\",
          \"battery_soc_entity\": \"Sensor showing battery charge percentage (0-100%). This must be a percentage sensor. Example: sensor.battery_soc, sensor.battery_level.\",
          \"solar_power_entity\": \"Cumulative solar energy production sensor (kWh, total_increasing preferred). The integration will automatically calculate power from energy readings. Example: sensor.solar_energy_total.\",
          \"house_load_entity\": \"Cumulative house energy consumption sensor (kWh, total_increasing). Used to track total energy usage. Example: sensor.house_consumption_total.\",
          \"battery_mode_select\": \"Select entity that controls battery operating mode (e.g., select.work_mode). Required for automatic battery control. Leave empty for monitoring-only mode.\",
          \"battery_charge_power\": \"Number entity to set maximum charging power (e.g., number.max_charge_current). Used to control charging speed. Leave empty if not available.\",
          \"mode_self_use\": \"The exact option name in your battery mode select for Self Use mode (battery charges from solar only). Example: 'Self Use', 'Self Consumption', 'PV Mode'.\",
          \"mode_backup\": \"The exact option name in your battery mode select for Backup mode (battery reserved for backup power). Example: 'Backup', 'UPS Mode', 'Reserve'.\",
          \"mode_force_charge\": \"The exact option name in your battery mode select for Force Charge mode (battery charges from grid). Example: 'Force Charge', 'Grid Charge', 'Charging'.\"
        }
      }
    }
  },
  "services": {
    "manual_override": {
      "name": "Manual Override",
      "description": "Manually override the battery control mode for a specified duration.",
      "fields": {
        "action": {
          "name": "Action",
          "description": "The control action to execute (e.g., 'force_charge', 'self_use', 'backup')"
        },
        "power_kw": {
          "name": "Power (kW)",
          "description": "Target power setpoint in kW (0-3.0 kW)"
        },
        "duration_minutes": {
          "name": "Duration (minutes)",
          "description": "How long to apply the override (1-1440 minutes)"
        }
      }
    }
  }
}
